\doxysection{ha\+\_\+energy/mqtt\+\_\+rec.h File Reference}
\hypertarget{mqtt__rec_8h}{}\label{mqtt__rec_8h}\index{ha\_energy/mqtt\_rec.h@{ha\_energy/mqtt\_rec.h}}
{\ttfamily \#include "{}energy.\+h"{}}\newline
{\ttfamily \#include "{}mqtt\+\_\+vars.\+h"{}}\newline
Include dependency graph for mqtt\+\_\+rec.\+h\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mqtt__rec_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mqtt__rec_8h__dep__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structha__flag__type}{ha\+\_\+flag\+\_\+type}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{mqtt__rec_8h_afe7eb806a46046286a2cfb93e9e773ec}{RDEV\+\_\+\+SIZE}}~10
\item 
\#define \mbox{\hyperlink{mqtt__rec_8h_a83cc734c6e4406346fa81fdca5b22fe8}{SLEEP\+\_\+\+CODE}}~0
\item 
\#define \mbox{\hyperlink{mqtt__rec_8h_a3a284e729efe694efdccf514d4f1e8e5}{FLOAT\+\_\+\+CODE}}~1
\item 
\#define \mbox{\hyperlink{mqtt__rec_8h_a440ad885a7f2d4ca0a7bc18067f775b7}{MBMQTT}}~1024
\end{DoxyCompactItemize}
\doxysubsubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{mqtt__rec_8h_a84a88b7d95b225fcc5f008c474558219}{mqtt\+\_\+id}} \{ \newline
\mbox{\hyperlink{mqtt__rec_8h_a84a88b7d95b225fcc5f008c474558219a2d5f3027ac999fa6e1382a8fc85e48ba}{P8055\+\_\+\+ID}}
, \mbox{\hyperlink{mqtt__rec_8h_a84a88b7d95b225fcc5f008c474558219a5f245782cbe7efbe181ea485eb5932a5}{FM80\+\_\+\+ID}}
, \mbox{\hyperlink{mqtt__rec_8h_a84a88b7d95b225fcc5f008c474558219ab5fb8e8dcac9113aa99bb13518a8eecb}{DUMPLOAD\+\_\+\+ID}}
, \mbox{\hyperlink{mqtt__rec_8h_a84a88b7d95b225fcc5f008c474558219ae3e04e0389b1b12a4cf2738165b4ce77}{HA\+\_\+\+ID}}
, \newline
\mbox{\hyperlink{mqtt__rec_8h_a84a88b7d95b225fcc5f008c474558219a8d55b8eb8161148021fadd02dd5a74a8}{LAST\+\_\+\+MQTT\+\_\+\+ID}}
 \}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int32\+\_\+t \mbox{\hyperlink{mqtt__rec_8h_ad4ef7431b04739013aac28fb3a299a00}{msgarrvd}} (void \texorpdfstring{$\ast$}{*}, char \texorpdfstring{$\ast$}{*}, int, MQTTClient\+\_\+message \texorpdfstring{$\ast$}{*})
\item 
void \mbox{\hyperlink{mqtt__rec_8h_a0f736e8daa9b3861377b54b450a1385b}{delivered}} (void \texorpdfstring{$\ast$}{*}, MQTTClient\+\_\+delivery\+Token)
\item 
bool \mbox{\hyperlink{mqtt__rec_8h_a9661324dccf0d0bda39b81c0fbba05ef}{json\+\_\+get\+\_\+data}} (c\+JSON \texorpdfstring{$\ast$}{*}, const char \texorpdfstring{$\ast$}{*}, c\+JSON \texorpdfstring{$\ast$}{*}, uint32\+\_\+t)
\item 
bool \mbox{\hyperlink{mqtt__rec_8h_ab3219c1d482ea970a00a713bc9631eb6}{fm80\+\_\+float}} (const bool set\+\_\+bias)
\item 
bool \mbox{\hyperlink{mqtt__rec_8h_a218d78ec87cc0f9067283f98bace529f}{fm80\+\_\+sleep}} (void)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
FILE \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{mqtt__rec_8h_acec19516a59050bb447192fe318e6a9c}{fout}}
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\Hypertarget{mqtt__rec_8h_a3a284e729efe694efdccf514d4f1e8e5}\index{mqtt\_rec.h@{mqtt\_rec.h}!FLOAT\_CODE@{FLOAT\_CODE}}
\index{FLOAT\_CODE@{FLOAT\_CODE}!mqtt\_rec.h@{mqtt\_rec.h}}
\doxysubsubsection{\texorpdfstring{FLOAT\_CODE}{FLOAT\_CODE}}
{\footnotesize\ttfamily \label{mqtt__rec_8h_a3a284e729efe694efdccf514d4f1e8e5} 
\#define FLOAT\+\_\+\+CODE~1}

\Hypertarget{mqtt__rec_8h_a440ad885a7f2d4ca0a7bc18067f775b7}\index{mqtt\_rec.h@{mqtt\_rec.h}!MBMQTT@{MBMQTT}}
\index{MBMQTT@{MBMQTT}!mqtt\_rec.h@{mqtt\_rec.h}}
\doxysubsubsection{\texorpdfstring{MBMQTT}{MBMQTT}}
{\footnotesize\ttfamily \label{mqtt__rec_8h_a440ad885a7f2d4ca0a7bc18067f775b7} 
\#define MBMQTT~1024}

\Hypertarget{mqtt__rec_8h_afe7eb806a46046286a2cfb93e9e773ec}\index{mqtt\_rec.h@{mqtt\_rec.h}!RDEV\_SIZE@{RDEV\_SIZE}}
\index{RDEV\_SIZE@{RDEV\_SIZE}!mqtt\_rec.h@{mqtt\_rec.h}}
\doxysubsubsection{\texorpdfstring{RDEV\_SIZE}{RDEV\_SIZE}}
{\footnotesize\ttfamily \label{mqtt__rec_8h_afe7eb806a46046286a2cfb93e9e773ec} 
\#define RDEV\+\_\+\+SIZE~10}

\Hypertarget{mqtt__rec_8h_a83cc734c6e4406346fa81fdca5b22fe8}\index{mqtt\_rec.h@{mqtt\_rec.h}!SLEEP\_CODE@{SLEEP\_CODE}}
\index{SLEEP\_CODE@{SLEEP\_CODE}!mqtt\_rec.h@{mqtt\_rec.h}}
\doxysubsubsection{\texorpdfstring{SLEEP\_CODE}{SLEEP\_CODE}}
{\footnotesize\ttfamily \label{mqtt__rec_8h_a83cc734c6e4406346fa81fdca5b22fe8} 
\#define SLEEP\+\_\+\+CODE~0}



\doxysubsection{Enumeration Type Documentation}
\Hypertarget{mqtt__rec_8h_a84a88b7d95b225fcc5f008c474558219}\index{mqtt\_rec.h@{mqtt\_rec.h}!mqtt\_id@{mqtt\_id}}
\index{mqtt\_id@{mqtt\_id}!mqtt\_rec.h@{mqtt\_rec.h}}
\doxysubsubsection{\texorpdfstring{mqtt\_id}{mqtt\_id}}
{\footnotesize\ttfamily \label{mqtt__rec_8h_a84a88b7d95b225fcc5f008c474558219} 
enum \mbox{\hyperlink{mqtt__rec_8h_a84a88b7d95b225fcc5f008c474558219}{mqtt\+\_\+id}}}

\begin{DoxyEnumFields}[2]{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{P8055\_ID@{P8055\_ID}!mqtt\_rec.h@{mqtt\_rec.h}}\index{mqtt\_rec.h@{mqtt\_rec.h}!P8055\_ID@{P8055\_ID}}}\Hypertarget{mqtt__rec_8h_a84a88b7d95b225fcc5f008c474558219a2d5f3027ac999fa6e1382a8fc85e48ba}\label{mqtt__rec_8h_a84a88b7d95b225fcc5f008c474558219a2d5f3027ac999fa6e1382a8fc85e48ba} 
P8055\+\_\+\+ID&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{FM80\_ID@{FM80\_ID}!mqtt\_rec.h@{mqtt\_rec.h}}\index{mqtt\_rec.h@{mqtt\_rec.h}!FM80\_ID@{FM80\_ID}}}\Hypertarget{mqtt__rec_8h_a84a88b7d95b225fcc5f008c474558219a5f245782cbe7efbe181ea485eb5932a5}\label{mqtt__rec_8h_a84a88b7d95b225fcc5f008c474558219a5f245782cbe7efbe181ea485eb5932a5} 
FM80\+\_\+\+ID&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{DUMPLOAD\_ID@{DUMPLOAD\_ID}!mqtt\_rec.h@{mqtt\_rec.h}}\index{mqtt\_rec.h@{mqtt\_rec.h}!DUMPLOAD\_ID@{DUMPLOAD\_ID}}}\Hypertarget{mqtt__rec_8h_a84a88b7d95b225fcc5f008c474558219ab5fb8e8dcac9113aa99bb13518a8eecb}\label{mqtt__rec_8h_a84a88b7d95b225fcc5f008c474558219ab5fb8e8dcac9113aa99bb13518a8eecb} 
DUMPLOAD\+\_\+\+ID&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{HA\_ID@{HA\_ID}!mqtt\_rec.h@{mqtt\_rec.h}}\index{mqtt\_rec.h@{mqtt\_rec.h}!HA\_ID@{HA\_ID}}}\Hypertarget{mqtt__rec_8h_a84a88b7d95b225fcc5f008c474558219ae3e04e0389b1b12a4cf2738165b4ce77}\label{mqtt__rec_8h_a84a88b7d95b225fcc5f008c474558219ae3e04e0389b1b12a4cf2738165b4ce77} 
HA\+\_\+\+ID&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{LAST\_MQTT\_ID@{LAST\_MQTT\_ID}!mqtt\_rec.h@{mqtt\_rec.h}}\index{mqtt\_rec.h@{mqtt\_rec.h}!LAST\_MQTT\_ID@{LAST\_MQTT\_ID}}}\Hypertarget{mqtt__rec_8h_a84a88b7d95b225fcc5f008c474558219a8d55b8eb8161148021fadd02dd5a74a8}\label{mqtt__rec_8h_a84a88b7d95b225fcc5f008c474558219a8d55b8eb8161148021fadd02dd5a74a8} 
LAST\+\_\+\+MQTT\+\_\+\+ID&\\
\hline

\end{DoxyEnumFields}

\begin{DoxyCode}{0}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mqtt__rec_8h_a84a88b7d95b225fcc5f008c474558219a2d5f3027ac999fa6e1382a8fc85e48ba}{P8055\_ID}},}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mqtt__rec_8h_a84a88b7d95b225fcc5f008c474558219a5f245782cbe7efbe181ea485eb5932a5}{FM80\_ID}},}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mqtt__rec_8h_a84a88b7d95b225fcc5f008c474558219ab5fb8e8dcac9113aa99bb13518a8eecb}{DUMPLOAD\_ID}},}
\DoxyCodeLine{00031\ \ \ \ \ \mbox{\hyperlink{mqtt__rec_8h_a84a88b7d95b225fcc5f008c474558219ae3e04e0389b1b12a4cf2738165b4ce77}{HA\_ID}},}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mqtt__rec_8h_a84a88b7d95b225fcc5f008c474558219a8d55b8eb8161148021fadd02dd5a74a8}{LAST\_MQTT\_ID}},}
\DoxyCodeLine{00033\ \ \ \ \ \};}

\end{DoxyCode}


\doxysubsection{Function Documentation}
\Hypertarget{mqtt__rec_8h_a0f736e8daa9b3861377b54b450a1385b}\index{mqtt\_rec.h@{mqtt\_rec.h}!delivered@{delivered}}
\index{delivered@{delivered}!mqtt\_rec.h@{mqtt\_rec.h}}
\doxysubsubsection{\texorpdfstring{delivered()}{delivered()}}
{\footnotesize\ttfamily \label{mqtt__rec_8h_a0f736e8daa9b3861377b54b450a1385b} 
void delivered (\begin{DoxyParamCaption}\item[{void \texorpdfstring{$\ast$}{*}}]{context}{, }\item[{MQTTClient\+\_\+delivery\+Token}]{dt}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00123\ \{}
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structha__flag__type}{ha\_flag\_type}}\ *ha\_flag\ =\ context;}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{comment}{//\ bug-\/out\ if\ no\ context\ variables\ passed\ to\ callback}}
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{keywordflow}{if}\ (context\ ==\ NULL)\ \{}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00129\ \ \ \ \ \}}
\DoxyCodeLine{00130\ \ \ \ \ ha\_flag-\/>\mbox{\hyperlink{structha__flag__type_ae72ab39aa9936edc5d464a42a17ebc60}{deliveredtoken}}\ =\ dt;}
\DoxyCodeLine{00131\ \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=219pt]{mqtt__rec_8h_a0f736e8daa9b3861377b54b450a1385b_icgraph}
\end{center}
\end{figure}
\Hypertarget{mqtt__rec_8h_ab3219c1d482ea970a00a713bc9631eb6}\index{mqtt\_rec.h@{mqtt\_rec.h}!fm80\_float@{fm80\_float}}
\index{fm80\_float@{fm80\_float}!mqtt\_rec.h@{mqtt\_rec.h}}
\doxysubsubsection{\texorpdfstring{fm80\_float()}{fm80\_float()}}
{\footnotesize\ttfamily \label{mqtt__rec_8h_ab3219c1d482ea970a00a713bc9631eb6} 
bool fm80\+\_\+float (\begin{DoxyParamCaption}\item[{const bool}]{set\+\_\+bias}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00247\ \{}
\DoxyCodeLine{00248\ \ \ \ \ \textcolor{keywordflow}{if}\ ((uint32\_t)\ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mvar[\mbox{\hyperlink{energy_8h_a4798b70da5e09a128bfc682db0b65072aab958e15de9756ae2b2f9c1eb7bfbc58}{V\_FCCM}}]\ ==\ \mbox{\hyperlink{mqtt__rec_8h_a3a284e729efe694efdccf514d4f1e8e5}{FLOAT\_CODE}})\ \{}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (set\_bias)\ \{}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mode.pv\_bias\ =\ \mbox{\hyperlink{energy_8h_a1059832ae84ae61706dbb73c6f6ad35d}{PV\_BIAS\_FLOAT}};}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mode.R\ !=\ \mbox{\hyperlink{energy_8h_a1bdad092c5c23a62d1b0d20c6ce63d69a63581c61e8680cb3c6be0310a4e19e81}{R\_IDLE}})\ \{}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mode.R\ =\ \mbox{\hyperlink{energy_8h_a1bdad092c5c23a62d1b0d20c6ce63d69a1474a7d3758281b3a8fdfcfda8147bab}{R\_FLOAT}};}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00256\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mode.R\ ==\ \mbox{\hyperlink{energy_8h_a1bdad092c5c23a62d1b0d20c6ce63d69a1474a7d3758281b3a8fdfcfda8147bab}{R\_FLOAT}})\ \{}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mode.R\ =\ \mbox{\hyperlink{energy_8h_a1bdad092c5c23a62d1b0d20c6ce63d69a53eae320dbcd86f620fa75b630f13c79}{R\_RUN}};}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00260\ \ \ \ \ \}}
\DoxyCodeLine{00261\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00262\ \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=227pt]{mqtt__rec_8h_ab3219c1d482ea970a00a713bc9631eb6_icgraph}
\end{center}
\end{figure}
\Hypertarget{mqtt__rec_8h_a218d78ec87cc0f9067283f98bace529f}\index{mqtt\_rec.h@{mqtt\_rec.h}!fm80\_sleep@{fm80\_sleep}}
\index{fm80\_sleep@{fm80\_sleep}!mqtt\_rec.h@{mqtt\_rec.h}}
\doxysubsubsection{\texorpdfstring{fm80\_sleep()}{fm80\_sleep()}}
{\footnotesize\ttfamily \label{mqtt__rec_8h_a218d78ec87cc0f9067283f98bace529f} 
bool fm80\+\_\+sleep (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00269\ \{}
\DoxyCodeLine{00270\ \ \ \ \ \textcolor{keywordflow}{if}\ ((uint32\_t)\ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mvar[\mbox{\hyperlink{energy_8h_a4798b70da5e09a128bfc682db0b65072aab958e15de9756ae2b2f9c1eb7bfbc58}{V\_FCCM}}]\ ==\ \mbox{\hyperlink{mqtt__rec_8h_a83cc734c6e4406346fa81fdca5b22fe8}{SLEEP\_CODE}})\ \{}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00272\ \ \ \ \ \}}
\DoxyCodeLine{00273\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00274\ \}}

\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=231pt]{mqtt__rec_8h_a218d78ec87cc0f9067283f98bace529f_icgraph}
\end{center}
\end{figure}
\Hypertarget{mqtt__rec_8h_a9661324dccf0d0bda39b81c0fbba05ef}\index{mqtt\_rec.h@{mqtt\_rec.h}!json\_get\_data@{json\_get\_data}}
\index{json\_get\_data@{json\_get\_data}!mqtt\_rec.h@{mqtt\_rec.h}}
\doxysubsubsection{\texorpdfstring{json\_get\_data()}{json\_get\_data()}}
{\footnotesize\ttfamily \label{mqtt__rec_8h_a9661324dccf0d0bda39b81c0fbba05ef} 
bool json\+\_\+get\+\_\+data (\begin{DoxyParamCaption}\item[{c\+JSON \texorpdfstring{$\ast$}{*}}]{json\+\_\+src}{, }\item[{const char \texorpdfstring{$\ast$}{*}}]{data\+\_\+id}{, }\item[{c\+JSON \texorpdfstring{$\ast$}{*}}]{name}{, }\item[{uint32\+\_\+t}]{i}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00138\ \{}
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{keywordtype}{bool}\ ret\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{keyword}{static}\ uint32\_t\ j\ =\ 0;}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \ \ \ \ \textcolor{comment}{//\ access\ the\ JSON\ data\ using\ the\ lookup\ string\ passed\ in\ data\_id}}
\DoxyCodeLine{00143\ \ \ \ \ name\ =\ cJSON\_GetObjectItemCaseSensitive(json\_src,\ data\_id);}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00146\ \textcolor{comment}{\ \ \ \ \ *\ process\ string\ values}}
\DoxyCodeLine{00147\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00148\ \ \ \ \ \textcolor{keywordflow}{if}\ (cJSON\_IsString(name)\ \&\&\ (name-\/>valuestring\ !=\ NULL))\ \{}
\DoxyCodeLine{00149\ \textcolor{preprocessor}{\#ifdef\ GET\_DEBUG}}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ fprintf(\mbox{\hyperlink{energy_8c_acec19516a59050bb447192fe318e6a9c}{fout}},\ \textcolor{stringliteral}{"{}\%s\ Name:\ \%s\(\backslash\)n"{}},\ data\_id,\ name-\/>valuestring);}
\DoxyCodeLine{00151\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ ret\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00153\ \ \ \ \ \}}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00155\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00156\ \textcolor{comment}{\ \ \ \ \ *\ process\ numeric\ values}}
\DoxyCodeLine{00157\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00158\ \ \ \ \ \textcolor{keywordflow}{if}\ (cJSON\_IsNumber(name))\ \{}
\DoxyCodeLine{00159\ \textcolor{preprocessor}{\#ifdef\ GET\_DEBUG}}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ fprintf(\mbox{\hyperlink{energy_8c_acec19516a59050bb447192fe318e6a9c}{fout}},\ \textcolor{stringliteral}{"{}\%s\ Value:\ \%f\(\backslash\)n"{}},\ data\_id,\ name-\/>valuedouble);}
\DoxyCodeLine{00161\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ >\ \mbox{\hyperlink{energy_8h_a4798b70da5e09a128bfc682db0b65072ab183b38bd716ecf9405c4546e3bd6870}{V\_DLAST}})\ \{\ \textcolor{comment}{//\ check\ for\ out-\/of-\/range\ index}}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \ \ \ \ i\ =\ \mbox{\hyperlink{energy_8h_a4798b70da5e09a128bfc682db0b65072ab183b38bd716ecf9405c4546e3bd6870}{V\_DLAST}};}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ lock\ the\ main\ value\ array\ during\ updates}}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ pthread\_mutex\_lock(\&\mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.ha\_lock);}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mvar[i]\ =\ name-\/>valuedouble;}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ pthread\_mutex\_unlock(\&\mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.ha\_lock);}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00172\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ *\ special\ processing\ for\ variable\ data\ received}}
\DoxyCodeLine{00173\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ ==\ \mbox{\hyperlink{energy_8h_a4798b70da5e09a128bfc682db0b65072a2dd8cb6e7c42be6b299e5d3d6617d7c2}{V\_DCMPPT}})\ \{}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00176\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ *\ load\ battery\ current\ standard\ deviation\ array\ bat\_c\_std\_dev\ with\ data}}
\DoxyCodeLine{00177\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{bsoc_8c_adc8522b4d922a9ce45f83ca6a8d2708c}{bsoc\_set\_std\_dev}}(\mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mvar[i],\ j++);}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (j\ >=\ \mbox{\hyperlink{mqtt__rec_8h_afe7eb806a46046286a2cfb93e9e773ec}{RDEV\_SIZE}})\ \{}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ j\ =\ 0;}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00184\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ *\ update\ local\ MATTER\ switch\ status\ from\ HA}}
\DoxyCodeLine{00185\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ ==\ \mbox{\hyperlink{energy_8h_a4798b70da5e09a128bfc682db0b65072a7391c358a2241e66cdf9f1e953184521}{V\_HDCSW}})\ \{}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.gti\_sw\_status\ =\ (bool)\ ((int32\_t)\ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mvar[i]);}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.dc\_mismatch\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ ==\ \mbox{\hyperlink{energy_8h_a4798b70da5e09a128bfc682db0b65072a61c580ff6ce646f13228dc2dcad390c1}{V\_HACSW}})\ \{}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.ac\_sw\_status\ =\ (bool)\ ((int32\_t)\ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mvar[i]);}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.ac\_mismatch\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00195\ }
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ command\ HA\_ENERGY\ to\ shutdown\ mode}}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ ==\ \mbox{\hyperlink{energy_8h_a4798b70da5e09a128bfc682db0b65072a71180ffbf74111c506a7c74e46a11dba}{V\_HSHUT}})\ \{}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.solar\_shutdown\ =\ (bool)\ ((int32\_t)\ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mvar[i]);}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ set\ HA\_ENERGY\ energy\ processing\ mode}}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ ==\ \mbox{\hyperlink{energy_8h_a4798b70da5e09a128bfc682db0b65072a972a1c6b6a2288d8dd88d6cde959086c}{V\_HMODE}})\ \{}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{energy_8c_a300fe8f759de831a9cf50f5a86c85e23}{ha\_flag\_vars\_ss}}.energy\_mode\ =\ (bool)\ ((int32\_t)\ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mvar[i]);}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ ==\ \mbox{\hyperlink{energy_8h_a4798b70da5e09a128bfc682db0b65072aa2a2d376137d4017052d0bf5ceeebf3d}{V\_HCON0}})\ \{}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mode.con0\ =\ (bool)\ ((int32\_t)\ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mvar[i]);}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ ==\ \mbox{\hyperlink{energy_8h_a4798b70da5e09a128bfc682db0b65072a50be71dd4aec439fc0394cb17e66a189}{V\_HCON1}})\ \{}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mode.con1\ =\ (bool)\ ((int32\_t)\ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mvar[i]);}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ ==\ \mbox{\hyperlink{energy_8h_a4798b70da5e09a128bfc682db0b65072a4d96c96a3fe5386e70009f7651adab78}{V\_HCON2}})\ \{}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mode.con2\ =\ (bool)\ ((int32\_t)\ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mvar[i]);}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ ==\ \mbox{\hyperlink{energy_8h_a4798b70da5e09a128bfc682db0b65072a682e786afbba8dc1e112013ad16da1c6}{V\_HCON3}})\ \{}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mode.con3\ =\ (bool)\ ((int32\_t)\ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mvar[i]);}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ ==\ \mbox{\hyperlink{energy_8h_a4798b70da5e09a128bfc682db0b65072a0be3335391f5cd47a8e92fdc04f0927f}{V\_HCON4}})\ \{\ \textcolor{comment}{//\ set\ DL\ GTI\ excess\ load\ MODE\ }}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mode.con4\ =\ (bool)\ ((int32\_t)\ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mvar[i]);}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ ==\ \mbox{\hyperlink{energy_8h_a4798b70da5e09a128bfc682db0b65072a8a6eb97b0e27737572161095bdccc22f}{V\_HCON5}})\ \{\ \textcolor{comment}{//\ clear\ DL\ GTI\ excess\ load\ MODE}}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mode.con5\ =\ (bool)\ ((int32\_t)\ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mvar[i]);}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ ==\ \mbox{\hyperlink{energy_8h_a4798b70da5e09a128bfc682db0b65072a7833386896850525de2b48c57d4595b7}{V\_HCON6}})\ \{\ \textcolor{comment}{//\ HA\ Energy\ program\ idle}}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mode.con6\ =\ (bool)\ ((int32\_t)\ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mvar[i]);}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ ==\ \mbox{\hyperlink{energy_8h_a4798b70da5e09a128bfc682db0b65072ad6f25d2f08b07b163f622f9a6c5c1d29}{V\_HCON7}})\ \{\ \textcolor{comment}{//\ HA\ Energy\ program\ exit}}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mode.con7\ =\ (bool)\ ((int32\_t)\ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.mvar[i]);}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ ret\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00229\ \ \ \ \ \}}
\DoxyCodeLine{00230\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{00231\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=304pt]{mqtt__rec_8h_a9661324dccf0d0bda39b81c0fbba05ef_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=341pt]{mqtt__rec_8h_a9661324dccf0d0bda39b81c0fbba05ef_icgraph}
\end{center}
\end{figure}
\Hypertarget{mqtt__rec_8h_ad4ef7431b04739013aac28fb3a299a00}\index{mqtt\_rec.h@{mqtt\_rec.h}!msgarrvd@{msgarrvd}}
\index{msgarrvd@{msgarrvd}!mqtt\_rec.h@{mqtt\_rec.h}}
\doxysubsubsection{\texorpdfstring{msgarrvd()}{msgarrvd()}}
{\footnotesize\ttfamily \label{mqtt__rec_8h_ad4ef7431b04739013aac28fb3a299a00} 
int32\+\_\+t msgarrvd (\begin{DoxyParamCaption}\item[{void \texorpdfstring{$\ast$}{*}}]{context}{, }\item[{char \texorpdfstring{$\ast$}{*}}]{topic\+Name}{, }\item[{int}]{topic\+Len}{, }\item[{MQTTClient\+\_\+message \texorpdfstring{$\ast$}{*}}]{message}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00008\ \{}
\DoxyCodeLine{00009\ \ \ \ \ int32\_t\ i,\ ret\ =\ 1;}
\DoxyCodeLine{00010\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ payloadptr;}
\DoxyCodeLine{00011\ \ \ \ \ \textcolor{keywordtype}{char}\ buffer[\mbox{\hyperlink{mqtt__rec_8h_a440ad885a7f2d4ca0a7bc18067f775b7}{MBMQTT}}];}
\DoxyCodeLine{00012\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structha__flag__type}{ha\_flag\_type}}\ *ha\_flag\ =\ context;}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \ \ \ \ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.link.mqtt\_count++;}
\DoxyCodeLine{00015\ \ \ \ \ \textcolor{comment}{//\ bug-\/out\ if\ no\ context\ variables\ passed\ to\ callback}}
\DoxyCodeLine{00016\ \ \ \ \ \textcolor{keywordflow}{if}\ (context\ ==\ NULL)\ \{}
\DoxyCodeLine{00017\ \ \ \ \ \ \ \ \ ret\ =\ -\/1;}
\DoxyCodeLine{00018\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ null\_exit;}
\DoxyCodeLine{00019\ \ \ \ \ \}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#ifdef\ DEBUG\_REC}}
\DoxyCodeLine{00022\ \ \ \ \ fprintf(\mbox{\hyperlink{energy_8c_acec19516a59050bb447192fe318e6a9c}{fout}},\ \textcolor{stringliteral}{"{}Message\ arrived\(\backslash\)n"{}});}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00025\ \textcolor{comment}{\ \ \ \ \ *\ move\ the\ received\ message\ into\ a\ processing\ holding\ buffer}}
\DoxyCodeLine{00026\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00027\ \ \ \ \ payloadptr\ =\ message-\/>payload;}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ message-\/>payloadlen;\ i++)\ \{}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ buffer[i]\ =\ *payloadptr++;}
\DoxyCodeLine{00030\ \ \ \ \ \}}
\DoxyCodeLine{00031\ \ \ \ \ buffer[i]\ =\ 0;\ \textcolor{comment}{//\ make\ a\ null\ terminated\ C\ string}}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{comment}{//\ parse\ the\ JSON\ data\ in\ the\ holding\ buffer}}
\DoxyCodeLine{00034\ \ \ \ \ cJSON\ *json\ =\ cJSON\_ParseWithLength(buffer,\ message-\/>payloadlen);}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordflow}{if}\ (json\ ==\ NULL)\ \{}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *error\_ptr\ =\ cJSON\_GetErrorPtr();}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (error\_ptr\ !=\ NULL)\ \{}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \ \ \ \ fprintf(\mbox{\hyperlink{energy_8c_acec19516a59050bb447192fe318e6a9c}{fout}},\ \textcolor{stringliteral}{"{}\%s\ Error:\ \%s\ NULL\ cJSON\ pointer\(\backslash\)n"{}},\ \mbox{\hyperlink{energy_8c_a18b19ee666a9edc39d904a474ddee1d9}{log\_time}}(\textcolor{keyword}{false}),\ error\_ptr);}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ ret\ =\ -\/1;}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ ha\_flag-\/>\mbox{\hyperlink{structha__flag__type_a9ea932e19a574476a14bc8c144064e88}{rec\_ok}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.fm80\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.dumpload\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.homeassistant\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.link.mqtt\_error++;}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ error\_exit;}
\DoxyCodeLine{00047\ \ \ \ \ \}}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00050\ \textcolor{comment}{\ \ \ \ \ *\ MQTT\ messages\ from\ the\ FM80\ Q84\ interface}}
\DoxyCodeLine{00051\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keywordflow}{if}\ (ha\_flag-\/>\mbox{\hyperlink{structha__flag__type_a0756e3e6519823c23b8711864a70460c}{ha\_id}}\ ==\ \mbox{\hyperlink{mqtt__rec_8h_a84a88b7d95b225fcc5f008c474558219a5f245782cbe7efbe181ea485eb5932a5}{FM80\_ID}})\ \{}
\DoxyCodeLine{00053\ \textcolor{preprocessor}{\#ifdef\ DEBUG\_REC}}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ fprintf(\mbox{\hyperlink{energy_8c_acec19516a59050bb447192fe318e6a9c}{fout}},\ \textcolor{stringliteral}{"{}FM80\ MQTT\ data\(\backslash\)r\(\backslash\)n"{}});}
\DoxyCodeLine{00055\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ cJSON\ *data\_result\ =\ json;}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (uint32\_t\ ii\ =\ \mbox{\hyperlink{energy_8h_a4798b70da5e09a128bfc682db0b65072aab958e15de9756ae2b2f9c1eb7bfbc58}{V\_FCCM}};\ ii\ <\ \mbox{\hyperlink{energy_8h_a4798b70da5e09a128bfc682db0b65072abb8be725d4da006153726eea397593e9}{V\_FLAST}};\ ii++)\ \{}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{mqtt__rec_8c_acaa1a0e82c0b21e28a7b6fd6c1d6ac43}{json\_get\_data}}(json,\ \mbox{\hyperlink{bsoc_8c_ae6b57480d8cda466cfc65b9bfc47b255}{mqtt\_name}}[ii],\ data\_result,\ ii))\ \{}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ha\_flag-\/>\mbox{\hyperlink{structha__flag__type_ac5f129b617820ce6cd1e289d918e2a3f}{var\_update}}++;}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.fm80\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00064\ \ \ \ \ \}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00067\ \textcolor{comment}{\ \ \ \ \ *\ MQTT\ messages\ from\ the\ K42\ dumpload/gti\ interface}}
\DoxyCodeLine{00068\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordflow}{if}\ (ha\_flag-\/>\mbox{\hyperlink{structha__flag__type_a0756e3e6519823c23b8711864a70460c}{ha\_id}}\ ==\ \mbox{\hyperlink{mqtt__rec_8h_a84a88b7d95b225fcc5f008c474558219ab5fb8e8dcac9113aa99bb13518a8eecb}{DUMPLOAD\_ID}})\ \{}
\DoxyCodeLine{00070\ \textcolor{preprocessor}{\#ifdef\ DEBUG\_REC}}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ fprintf(\mbox{\hyperlink{energy_8c_acec19516a59050bb447192fe318e6a9c}{fout}},\ \textcolor{stringliteral}{"{}DUMPLOAD\ MQTT\ data\(\backslash\)r\(\backslash\)n"{}});}
\DoxyCodeLine{00072\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ cJSON\ *data\_result\ =\ json;}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (uint32\_t\ ii\ =\ \mbox{\hyperlink{energy_8h_a4798b70da5e09a128bfc682db0b65072a7391c358a2241e66cdf9f1e953184521}{V\_HDCSW}};\ ii\ <\ \mbox{\hyperlink{energy_8h_a4798b70da5e09a128bfc682db0b65072ab183b38bd716ecf9405c4546e3bd6870}{V\_DLAST}};\ ii++)\ \{}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{mqtt__rec_8c_acaa1a0e82c0b21e28a7b6fd6c1d6ac43}{json\_get\_data}}(json,\ \mbox{\hyperlink{bsoc_8c_ae6b57480d8cda466cfc65b9bfc47b255}{mqtt\_name}}[ii],\ data\_result,\ ii))\ \{}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ha\_flag-\/>\mbox{\hyperlink{structha__flag__type_ac5f129b617820ce6cd1e289d918e2a3f}{var\_update}}++;}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.dumpload\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00081\ \ \ \ \ \}}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00084\ \textcolor{comment}{\ \ \ \ \ *\ MQTT\ messages\ from\ the\ Linux\ HA\_ENERGY\ interface}}
\DoxyCodeLine{00085\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keywordflow}{if}\ (ha\_flag-\/>\mbox{\hyperlink{structha__flag__type_a0756e3e6519823c23b8711864a70460c}{ha\_id}}\ ==\ \mbox{\hyperlink{mqtt__rec_8h_a84a88b7d95b225fcc5f008c474558219ae3e04e0389b1b12a4cf2738165b4ce77}{HA\_ID}})\ \{}
\DoxyCodeLine{00087\ \textcolor{preprocessor}{\#ifdef\ DEBUG\_REC}}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ fprintf(\mbox{\hyperlink{energy_8c_acec19516a59050bb447192fe318e6a9c}{fout}},\ \textcolor{stringliteral}{"{}Home\ Assistant\ MQTT\ data\(\backslash\)r\(\backslash\)n"{}});}
\DoxyCodeLine{00089\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ cJSON\ *data\_result\ =\ json;}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{mqtt__rec_8c_acaa1a0e82c0b21e28a7b6fd6c1d6ac43}{json\_get\_data}}(json,\ \mbox{\hyperlink{bsoc_8c_ae6b57480d8cda466cfc65b9bfc47b255}{mqtt\_name}}[\mbox{\hyperlink{energy_8h_a4798b70da5e09a128bfc682db0b65072a61c580ff6ce646f13228dc2dcad390c1}{V\_HACSW}}],\ data\_result,\ \mbox{\hyperlink{energy_8h_a4798b70da5e09a128bfc682db0b65072a61c580ff6ce646f13228dc2dcad390c1}{V\_HACSW}}))\ \{}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ ha\_flag-\/>\mbox{\hyperlink{structha__flag__type_ac5f129b617820ce6cd1e289d918e2a3f}{var\_update}}++;}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ data\_result\ =\ json;}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{mqtt__rec_8c_acaa1a0e82c0b21e28a7b6fd6c1d6ac43}{json\_get\_data}}(json,\ \mbox{\hyperlink{bsoc_8c_ae6b57480d8cda466cfc65b9bfc47b255}{mqtt\_name}}[\mbox{\hyperlink{energy_8h_a4798b70da5e09a128bfc682db0b65072a7391c358a2241e66cdf9f1e953184521}{V\_HDCSW}}],\ data\_result,\ \mbox{\hyperlink{energy_8h_a4798b70da5e09a128bfc682db0b65072a7391c358a2241e66cdf9f1e953184521}{V\_HDCSW}}))\ \{}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ ha\_flag-\/>\mbox{\hyperlink{structha__flag__type_ac5f129b617820ce6cd1e289d918e2a3f}{var\_update}}++;}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{energy_8c_aae3805c63e28abac1e41ffd7b623596e}{E}}.homeassistant\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00101\ \ \ \ \ \}}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{comment}{//\ done\ with\ processing\ MQTT\ async\ message,\ set\ state\ flags}}
\DoxyCodeLine{00104\ \ \ \ \ ha\_flag-\/>\mbox{\hyperlink{structha__flag__type_ab70820f3deb59737344c41114223330b}{receivedtoken}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00105\ \ \ \ \ ha\_flag-\/>\mbox{\hyperlink{structha__flag__type_a9ea932e19a574476a14bc8c144064e88}{rec\_ok}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{00107\ \textcolor{comment}{\ \ \ \ \ *\ exit\ and\ delete/free\ resources.\ In\ steps\ depending\ of\ possible\ error\ conditions}}
\DoxyCodeLine{00108\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00109\ error\_exit:}
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{comment}{//\ delete\ the\ JSON\ object}}
\DoxyCodeLine{00111\ \ \ \ \ cJSON\_Delete(json);}
\DoxyCodeLine{00112\ null\_exit:}
\DoxyCodeLine{00113\ \ \ \ \ \textcolor{comment}{//\ free\ the\ MQTT\ objects}}
\DoxyCodeLine{00114\ \ \ \ \ MQTTClient\_freeMessage(\&message);}
\DoxyCodeLine{00115\ \ \ \ \ MQTTClient\_free(topicName);}
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{00117\ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{mqtt__rec_8h_ad4ef7431b04739013aac28fb3a299a00_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=220pt]{mqtt__rec_8h_ad4ef7431b04739013aac28fb3a299a00_icgraph}
\end{center}
\end{figure}


\doxysubsection{Variable Documentation}
\Hypertarget{mqtt__rec_8h_acec19516a59050bb447192fe318e6a9c}\index{mqtt\_rec.h@{mqtt\_rec.h}!fout@{fout}}
\index{fout@{fout}!mqtt\_rec.h@{mqtt\_rec.h}}
\doxysubsubsection{\texorpdfstring{fout}{fout}}
{\footnotesize\ttfamily \label{mqtt__rec_8h_acec19516a59050bb447192fe318e6a9c} 
FILE\texorpdfstring{$\ast$}{*} fout\hspace{0.3cm}{\ttfamily [extern]}}

